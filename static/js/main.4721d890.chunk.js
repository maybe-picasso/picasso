(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{142:function(e){e.exports=JSON.parse('{"a":"https://maybe-picasso.github.io/picasso"}')},197:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var c,r,i,s,a=n(59),o=n.n(a),l=n(68),u=n(17),d=n(26),j=n(36),b=Object(j.a)()({state:{isLoading:!1},selectors:function(e){return{state:function(){return e}}},reducers:{showLoading:function(e){e.isLoading=!0},hideLoading:function(e){e.isLoading=!1}}}),h=Object(j.a)()({state:{isConnectedSocket:!1,isJoined:!1,userInfo:null,participants:[]},selectors:function(e){return{state:function(){return e}}},reducers:{setSocketState:function(e,t){return e.isConnectedSocket=t,e},setJoinedState:function(e,t){return e.isJoined=t,e},setUserInfo:function(e,t){return e.userInfo=t,e},updateParticipants:function(e,t){return e.participants=t,e},updateUserPoint:function(e,t){var n=t.userId,c=t.roundPoint,r=e.participants.map((function(e){var t;e.userId===n&&(e.point=null!==(t=e.point)&&void 0!==t?t:0+c);return e}));return e.participants=r,e}}}),f=n(91);!function(e){e.CHAT="CHAT",e.DRAWING="DRAWING",e.CORRECT_USER="CORRECT_USER",e.SYNC_GAME_STATUS="SYNC_GAME_STATUS"}(c||(c={})),function(e){e.PEN="PEN",e.ERASER="ERASER",e.CLEAR_ALL="CLEAR_ALL"}(r||(r={})),function(e){e.START="START",e.DRAW="DRAW",e.END="END",e.CLEAR_ALL="CLEAR_ALL",e.UNDO="UNDO",e.REDO="REDO"}(i||(i={})),function(e){e.WAITING="WAITING",e.STANDBY_TURN="STANDBY_TURN",e.PLAYING="PLAYING",e.COMPLETED="COMPLETED",e.GAMEOVER="GAMEOVER"}(s||(s={}));var m,O,p=n(234),g=n(233),x=(n(235),n(138),[{name:"\uc591\uc790\ub9ac"},{name:"\ud669\uc18c\uc790\ub9ac"},{name:"\uc30d\ub465\uc774\uc790\ub9ac"},{name:"\uac8c\uc790\ub9ac"},{name:"\uc0ac\uc790\uc790\ub9ac"},{name:"\ucc98\ub140\uc790\ub9ac"},{name:"\ucc9c\uce6d\uc790\ub9ac"},{name:"\uc804\uac08\uc790\ub9ac"},{name:"\ubc40\uc8fc\uc778\uc790\ub9ac"},{name:"\uad81\uc218\uc790\ub9ac"},{name:"\uc5fc\uc18c\uc790\ub9ac"},{name:"\ubb3c\uace0\uae30\uc790\ub9ac"}]),v=["#000000","#aaaaaa","#dddddd","#ffffff","#0074d9","#7fdbff","#39cccc","#3d9970","#2ecc40","#01ff70","#ffdc00","#ff851b","#f00000","#85144b","#f012be","#b10dc9","#F05E5F","#5A4B50","#8BBEB4","#F0B85E"],S=["\ud83d\udc36","\ud83d\udc31","\ud83e\udd81","\ud83d\udc30","\ud83e\udd8a","\ud83d\udc28","\ud83d\udc3c","\ud83d\udc2f","\ud83d\udc25","\ud83d\udc37","\ud83d\udc2e","\ud83d\udc39","\ud83d\udc3b\u200d\u2744\ufe0f","\ud83d\udc38","\ud83d\udc32","\ud83d\udc33","\ud83d\udc19","\ud83d\udc14","\ud83e\udd84","\ud83d\udc3a","\ud83e\udda5","\ud83e\udda6","\ud83e\uddad","\ud83e\udd96","\ud83d\udc22","\ud83e\udd8b","\ud83d\udc1b","\ud83d\udc1d","\ud83d\udd77\ufe0f","\ud83d\udc0c"],y="nickName",w="drawingTools",C=["\ud584\ubc84\uac70","\uce58\ud0a8","\ud53c\uc790","\uc2a4\ud0c0\ubc85\uc2a4","\ub179\ucc28","\ud48d\uc120\uaecc","\uc218\uc601\ubcf5","\ub178\ub798\ubc29","\ud560\uba38\ub2c8","\uac10\uae30\uc57d","\uc544\uc774\ud3f0","\ud06c\ub9ac\uc2a4\ub9c8\uc2a4","\ud654\uc7a5\uc2e4","\ubcc0\uae30","\uc138\uba74\ub300","\ube44\ub204","\uc0f4\ud478","\ud654\uc7a5\ub300","\uac70\uc6b8","\uc601\ud654\uad00","\ud31d\ucf58","\ub2e4\uc774\uc18c","\ubd95\uc5b4\ube75","\ud638\ub450\uacfc\uc790","\ub86f\ub370\ub9ac\uc544","\ub9e5\ub3c4\ub0a0\ub4dc","\ud3b8\uc758\uc810","\ubc31\ud654\uc810","\uc81c\uc721\ubcf6\uc74c","\uc21c\ub300\ubcf6\uc74c","\ucb48\uafb8\ubbf8\ubcf6\uc74c","\uae40\uce58\ucc0c\uac1c","\ub41c\uc7a5\ucc0c\uac1c","\uc778\uc2a4\ud0c0\uadf8\ub7a8","\uce74\uce74\uc624\ud1a1","\ub124\uc774\ubc84","\uae50\ubd80","\ubc88\uc544\uc6c3","\ubc00\ud0a4\ud2b8","\uce5c\uad6c","\ubb34\uc57c\ud638","\ubb34\ud55c\ub3c4\uc804","\uc778\uc2f8","\uc544\uc2f8","\uce74\uce74\uc624\ud398\uc774","\uce74\uce74\uc624\uac8c\uc784\uc988","\uc8fc\uc2dd","\ud558\ub77d\uc7a5","\uc0c1\uc2b9\uc7a5","\ub530\uc0c1","\uc6b4\ub3d9\ud654","\uc544\uba54\ub9ac\uce74\ub178","\ud56b\ucd08\ucf54","\ube75\uc9d1","\ubc14\uac8c\ud2b8","\ucf00\uc774\ud06c","\uc9c0\ud558\ucca0","\ubc84\uc2a4","\uc0b0\ucc45","\uc5d4\ube44\ub514\uc544","\uc560\ud50c","\ud14c\uc2ac\ub77c","\uad6d\uc0b0\ucc28","\uc678\uc81c\ucc28","\uac10","\uac00\uc624\ub9ac","\uac00\uc7ac","\uac00\uc9c0","\uac08\ub9e4\uae30","\uac10\uade4","\uac10\uc790","\uac15\uc544\uc9c0","\uac1c\uad6c\ub9ac","\uac1c\ub098\ub9ac","\uac1c\ubbf8","\uac1c\ubbf8\ud565\uae30","\uac1c\ubd88","\uac70\ubbf8","\uac70\ubd81\uc774","\uac70\uc704","\uace0\uad6c\ub9c8","\uace0\ub4f1\uc5b4","\uace0\ub798","\uace0\ub798\uc0c1\uc5b4","\uace0\uc0ac\ub9ac","\uace0\uc2b4\ub3c4\uce58","\uace0\uc591\uc774","\uacf0\ud321\uc774","\uacf5\ub8e1","\uad11\uc5b4","\uad6d\ud654","\uad74","\uade4","\uae08\ubd95\uc5b4","\uae30\ub7ec\uae30","\uae30\ub9b0","\uae4c\ub9c8\uadc0","\uae7b\uc78e","\uaf43\uac8c","\uafc0\ubc8c","\ub098\ubb34\ub298\ubcf4","\ub098\ubc29","\ub098\ube44","\ub099\uc9c0","\ub0a0\uce58","\ub108\uad6c\ub9ac","\ub178\ub8e8","\ub291\ub300","\ub2e4\ub78c\uc950","\ub2e4\uc2dc\ub9c8","\ub2e8\ud48d\ub098\ubb34","\ub2e8\ud638\ubc15","\ub2ec\ud33d\uc774","\ub2f9\uadfc","\ub2f9\ub098\uadc0","\ub300\ucd94","\ub300\ud30c","\ub3c4\ub871\ub1fd","\ub3c4\ub9c8\ubc40","\ub3c5\uc218\ub9ac","\ub3cc\uace0\ub798","\ub3fc\uc9c0","\ub450\uaebc\ube44","\ub450\ub354\uc9c0","\ub531\ub530\uad6c\ub9ac","\ub538\uae30","\ub545\ucf69","\ub808\ubaac","\ub9c8\ub298","\ub9dd\uace0","\ub9dd\ub465\uc5b4","\ub9e4\ud654","\ub9f7\ub3fc\uc9c0","\uba38\uc2a4\ucea3","\uba4d\uac8c","\uba54\uae30","\uba54\ub69c\uae30","\uba5c\ub860","\ubaa8\uae30","\ubb34\uad81\ud654","\ubb38\uc5b4","\ubb3c\uac1c","\ubbf8\uc5b4\ucea3","\ubbf8\uc5ed","\ubc14\ub098\ub098","\ubc14\ub2e4\ud45c\ubc94","\ubc14\uc9c0\ub77d","\ubc15\uc950","\ubc18\ub2ec\uacf0","\ubc24\uc1a1\uc774","\ubc29\uc6b8\uaf43","\ubc30","\ubc30\ucd94","\ubc40","\ubc84\ud314\ub85c","\ubc94\uace0\ub798","\ubc9a\uaf43","\ubcbc","\ubcd1\uc544\ub9ac","\ubcf4\ub9ac","\ubcf5\uc22d\uc544","\ubcf5\uc5b4","\ubd09\uc22d\uc544","\ubd80\uc5c9\uc774","\ubd80\ucd94","\ubd81\uadf9\uacf0","\ubd88\uac00\uc0ac\ub9ac","\ube44\ub2e8\ubc40","\ube44\ub458\uae30","\ubed0\uafb8\uae30","\uc0ac\uacfc","\uc0ac\ub9c9\uc5ec\uc6b0","\uc0ac\uc2b4","\uc0ac\uc790","\uc0b0\ub538\uae30","\uc0b4\ubaa8\uc0ac","\uc0bd\uc0b4\uac1c","\uc0c1\uc5b4","\uc0c1\ucd94","\uc0c8\uc6b0","\uc0dd\uc950","\uc11d\ub958","\uc120\uc778\uc7a5","\uc18c\ub098\ubb34","\uc18c\ub77c","\uc218\ub2ec","\uc218\ubc15","\uc2dc\uae08\uce58","\uc544\ubaac\ub4dc","\uc544\ubcf4\uce74\ub3c4","\uc544\uce74\uc2dc\uc544","\uc545\uc5b4","\uc54c\ub85c\uc5d0","\uc560\ud638\ubc15","\uc575\ubb34\uc0c8","\uc57c\uc790\ub098\ubb34","\uc591","\uc591\ud30c","\uc5bc\ub8e9\ub9d0","\uc5ec\uc6b0","\uc5fc\uc18c","\uc624\ub791\uc6b0\ud0c4","\uc624\ub80c\uc9c0","\uc624\ub9ac","\uc624\uc774","\uc624\uc9d5\uc5b4","\uc62c\ube7c\ubbf8","\uc644\ub450\ucf69","\uc6a9","\uc6d0\uc22d\uc774","\uc6d0\uc559","\uc720\ub2c8\ucf58","\uc720\uc790\ucc28","\uc774\uad6c\uc544\ub098","\uc774\ub07c","\uc789\uc5b4","\uc790\ub77c","\uc790\ubabd","\uc7a0\uc790\ub9ac","\uc7a5\ubbf8","\uc7a5\uc5b4","\uc804\uac08","\uc81c\ube44","\uc871\uc81c\ube44","\uc9c4\ub2ec\ub798","\uc9c4\ub3d7\uac1c","\ucb48\uafb8\ubbf8","\ucc38\ub098\ubb34","\ucc38\uce58","\uccad\uc124\ubaa8","\uccad\ud3ec\ub3c4","\uce58\uc640\uc640","\uce58\ud0c0","\uce68\ud32c\uc9c0","\uce74\uba5c\ub808\uc628","\ucea5\uac70\ub8e8","\ucf54\ube0c\ub77c","\ucf54\ubfd4\uc18c","\ucf54\uc54c\ub77c","\ucf54\ucf54\ub11b","\ud0c0\uc870","\ud1a0\ub07c","\ud1a0\ub9c8\ud1a0","\ud30c\ub791\uc0c8","\ud30c\ub9ac","\ud30c\uc778\uc560\ud50c","\ud310\ub2e4","\ud3a0\ub9ac\ucee8","\ud3ad\uadc4","\ud3b8\ubc31\ub098\ubb34","\ud3ec\ub3c4","\ud45c\ubc94","\ud480","\ud478\ub4e4","\ud558\ub8e8\uc0b4\uc774","\ud558\ub9c8","\ud558\uc774\uc5d0\ub098","\ud55c\ub77c\ubd09","\ud574\ub2ec","\ud574\ubc14\ub77c\uae30","\ud574\uc0bc","\ud574\ud30c\ub9ac","\ud584\uc2a4\ud130","\ud638\ub450","\ud638\ub791\uc774","\ud638\ubc15","\ud64d\uc5b4","\ud669\uc18c"],k=function(e){return Math.floor(Math.random()*e)},E=n(154),I=n(142),N="true"===Object({NODE_ENV:"production",PUBLIC_URL:"/picasso",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).STORYBOOK,A=(I.a,Object(E.a)("wss://maybe-picasso.herokuapp.com",{transports:["websocket"]})),R=function(e){var t=e.type,n=e.body,c=e.to,r={roomId:m,senderId:O,to:void 0===c?"all":c,type:t,body:n};A.send(r)},T=A,D={status:s.WAITING,painterId:null,questions:[],round:1,time:60},P=Object(j.a)()({state:D,selectors:function(e){return{state:function(){return e},isVisibleOverlayContent:function(){return e((function(e){var t=e.status;return t===s.STANDBY_TURN||t===s.COMPLETED||t===s.GAMEOVER}))},currentQuestion:function(){return e((function(e){return e.questions[e.round-1]}))}}},reducers:{setQuestions:function(e,t){return e.questions=t,e},setPainterId:function(e,t){return e.painterId=t,e},setRound:function(e,t){return e.round=t,e},setTime:function(e,t){return e.time=t,e},setStatus:function(e,t){return e.status=t,e}},effects:function(e){return{init:function(t,n){var c=n.room.participants;e.game.standBy(),e.game.setRound(D.round),e.game.setTime(D.time),e.game.setPainterId(c[0].userId)},wait:function(){e.game.setStatus(s.WAITING)},standBy:function(){e.game.setStatus(s.STANDBY_TURN),f.a((function(){e.game.play()}),5e3)},play:function(){e.game.setStatus(s.PLAYING)},complete:function(){e.game.setStatus(s.COMPLETED),f.a((function(){e.game.nextQuestion({})}),5e3)},finish:function(){e.game.setStatus(s.GAMEOVER)},nextQuestion:function(t,n){var c,r,i=n.game,s=n.room.participants,a=i.round+1,o=a-1,l=null!==(c=null===(r=s[o])||void 0===r?void 0:r.userId)&&void 0!==c?c:s[(o-s.length)%s.length].userId;a>i.questions.length?e.game.finish():(e.game.standBy(),e.game.setRound(a),e.game.setTime(D.time),e.game.setPainterId(l),e.gamePoint.resetCorrectUserInfo())},checkUserAnswer:function(t,n){var r=t.userId,i=t.text,s=n.game,a=n.gamePoint,o=s.questions,l=s.round,u=s.time,d=s.painterId,j=a.correctUserList,b=o[l-1],h=b===i,f=j.find((function(e){return e.userId===r}));d===r||f||h&&u&&(e.gamePoint.correctUser({userId:r}),R({type:c.CORRECT_USER,body:{userId:r}}))}}}}),L={1:2,2:1.5,3:1.2,99:1},z=Object(j.a)()({state:{correctUserList:[]},selectors:function(e){return{state:function(){return e}}},reducers:{addCorrectUserInfo:function(e,t){return e.correctUserList.push(t),e},resetCorrectUserInfo:function(e){return e.correctUserList=[],e}},effects:function(e){return{correctUser:function(t,n){var c=t.userId,r=n.room,i=n.game,s=n.gamePoint.correctUserList,a=r.participants,o=i.time,l=s.length+1,u=o*L[l<4?l:99]+10*a.length;e.gamePoint.addCorrectUserInfo({userId:c,point:u,time:o}),e.room.updateUserPoint({userId:c,roundPoint:u})}}}}),H=Object(j.a)()({state:{chatList:[]},selectors:function(e){return{state:function(){return e}}},reducers:{addChat:function(e,t){return e.chatList.push(t),e}}}),M=n(16);function U(e,t){t=JSON.stringify(t),localStorage[e]=t}function W(e){var t=localStorage[e];if(!t)return console.info("localStorage\uc5d0 ".concat(e,"\ub294 \uc5c6\uc2b5\ub2c8\ub2e4.")),null;try{t=JSON.parse(t)}catch(n){console.error("getStorage catch(error)",n)}return t}var _,G=W(w)||{},B=G.tool,Y=G.color,K=G.size,J={currentTool:B||r.PEN,currentColor:Y||v[0],currentSize:K||3},Q={common:b,room:h,game:P,gamePoint:z,chat:H,tools:Object(j.a)()({state:J,selectors:function(e){return{state:function(){return e}}},reducers:{setTool:function(e,t){var n=e.currentColor,c=e.currentSize;return U(w,{tool:t,color:n,size:c}),Object(M.a)(Object(M.a)({},e),{},{currentTool:t})},setColor:function(e,t){var n=e.currentTool,c=e.currentSize;return U(w,{tool:n,color:t,size:c}),Object(M.a)(Object(M.a)({},e),{},{currentColor:t})},setSize:function(e,t){var n=e.currentTool,c=e.currentColor;return U(w,{tool:n,color:c,size:t}),Object(M.a)(Object(M.a)({},e),{},{currentSize:t})}}})},q=n(156),V=n(155),F=Object(j.b)({models:Q,plugins:[Object(q.a)(),Object(V.a)()]}),X=F.select,Z=Object(d.b)({breakpoints:{sm:"480px",md:"768px",lg:"1024px",xl:"1280px"}}),$=n(19),ee=n(18),te=n(1),ne=n(132),ce=n(133),re=n(78),ie={HOME:"/",ROOM:"/room/:roomId",ABOUT:"/about"},se=(n(197),n(3)),ae=function(){var e=Object(te.useState)(0),t=Object(ee.a)(e,2),n=t[0],c=t[1],r=Object($.f)();return Object(se.jsxs)("div",{className:"home-wrap",children:[Object(se.jsxs)(ne.d,{className:"room-list-wrap",children:[Object(se.jsxs)(ne.i,{as:"h1",size:"2xl",mb:"5",color:"#fff",children:["Picasso \ud83c\udfa8",Object(se.jsx)(ne.a,{className:"badge",variant:"solid",colorScheme:"purple",children:"Alpha"})]}),Object(se.jsx)("ul",{children:x.map((function(e,t){var r=e.name,i=n===t,s="".concat(i?"active":"");return Object(se.jsx)("li",{children:Object(se.jsxs)("button",{type:"button",className:s,onClick:function(){return function(e){c(e)}(t)},children:[Object(se.jsx)("span",{className:"name",children:r}),i&&Object(se.jsx)("span",{className:"icon",children:"\ud83d\udd2e"})]})})}))}),Object(se.jsxs)(ne.k,{spacing:5,children:[Object(se.jsx)(ne.e,{}),Object(se.jsx)(ce.a,{type:"submit",colorScheme:"teal",size:"lg",variant:"solid",rightIcon:Object(se.jsx)(re.c,{}),onClick:function(){r("/room/".concat(x[n].name))},children:"\uc2dc\uc791\ud558\uae30"})]})]}),Object(se.jsx)("footer",{children:Object(se.jsx)(l.b,{to:ie.ABOUT,children:"About us"})})]})},oe=n(38),le=n.n(oe),ue=(n(199),function(e){var t=e.children,n=e.id;return Object(se.jsx)("div",{className:"page-template",id:n,children:t})}),de=n(144),je=new(n.n(de).a),be=function(){var e=Object(u.c)(X.room.state).participants,t=Object(u.c)(X.game.state),n=t.time,r=t.questions,i=Object(u.c)(X.gamePoint.state).correctUserList,s=he(),a=s.isWaiting,o=s.isPlaying,l=Object(u.b)(),d=e.length,j=i.length>0&&i.length===e.length-1,b=Object(te.useRef)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return Object(g.a)(C,e)}()).current;Object(te.useEffect)((function(){d>=2&&a?l.game.init({}):d<=1&&(a&&!r.length?l.game.setQuestions(b):l.game.wait())}),[a,d,l,r,b]),Object(te.useEffect)((function(){o&&f.a((function(){0===n?l.game.complete():l.game.setTime(n-1)}),1e3)}),[o,n,l]),Object(te.useEffect)((function(){j&&l.game.complete()}),[j,l]),Object(te.useEffect)((function(){o&&_&&_.clearAll()}),[o]),Object(te.useEffect)((function(){je.removeAllListeners(c.CORRECT_USER),je.on(c.CORRECT_USER,(function(e){var t=e.body.userId;l.gamePoint.correctUser({userId:t})}))}),[l])},he=function(){var e=Object(u.c)(X.game.state).status;return{isWaiting:e===s.WAITING,isStandByTurn:e===s.STANDBY_TURN,isPlaying:e===s.PLAYING,isComplete:e===s.COMPLETED,isGameOver:e===s.GAMEOVER}},fe=function(){var e=Object(u.c)(X.room.state).participants,t=Object(u.c)(X.game.state),n=t.time,r=t.painterId,i=t.status,s=t.round,a=t.questions,o=he().isWaiting,l=Object(u.b)(),d=Oe();Object(te.useEffect)((function(){je.removeAllListeners("join"),je.on("join",(function(t){console.log("[\ub514\ubc84\uae45] join :>> ",t),(!o&&d||1===e.length)&&R({type:c.SYNC_GAME_STATUS,to:t.userInfo.userId,body:{questions:a,painterId:r,status:i,round:s,time:n}})}))}),[o,d,e,a,r,s,n,i]),Object(te.useEffect)((function(){je.removeAllListeners(c.SYNC_GAME_STATUS),je.on(c.SYNC_GAME_STATUS,(function(e){var t=e.body;console.log("[\ub514\ubc84\uae45] SYNC_GAME_STATUS :>> ",t);var n=t.questions,c=t.status,r=t.painterId,i=t.round,s=t.time;l.game.setQuestions(n),l.game.setPainterId(r),l.game.setTime(s),l.game.setRound(i),l.game.setStatus(c)}))}),[l])},me=function(){var e=Object(u.c)(X.room.state).userInfo;return Object(u.c)(X.gamePoint.state).correctUserList.find((function(t){return t.userId===(null===e||void 0===e?void 0:e.userId)}))},Oe=function(){var e=Object(u.c)(X.room.state).userInfo,t=Object(u.c)(X.game.state).painterId;return(null===e||void 0===e?void 0:e.userId)===t},pe=function(){var e,t=Object(u.c)(X.room.state).participants,n=Object(u.c)(X.game.state).painterId;return null!==(e=t.find((function(e){return e.userId===n})))&&void 0!==e?e:{}},ge=n(4),xe=n(5),ve=r.PEN,Se="round",ye=function(){function e(t){var n=t.canvas,c=t.context,r=t.config;Object(ge.a)(this,e),this.context=void 0,this.canvas=void 0,this.config=void 0,this.startPoint={x:0,y:0},this.currentPoint={x:0,y:0},this.canvas=n,this.context=c,this.config=null!==r&&void 0!==r?r:{size:3,color:"black",mode:ve}}return Object(xe.a)(e,[{key:"getPoint",value:function(e){return{x:e.offsetX,y:e.offsetY}}},{key:"start",value:function(){this.context?this.context.beginPath():console.error("\ucee8\ud14d\uc2a4\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}},{key:"draw",value:function(e){var t=e.context,n=e.config,c=e.startPoint,i=e.currentPoint,s=n.mode,a=n.size,o=n.color;s===r.PEN?(t.globalCompositeOperation="source-over",t.strokeStyle=o,t.lineWidth=a):s===r.ERASER&&(t.globalCompositeOperation="destination-out",t.lineWidth=4*a),t.lineJoin=Se,t.lineCap=Se,t.moveTo(c.x,c.y),t.lineTo(i.x,i.y),t.stroke()}},{key:"end",value:function(){this.context?this.context.closePath():console.error("\ucee8\ud14d\uc2a4\ud2b8\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}},{key:"clear",value:function(){var e=this.context.canvas,t=e.width,n=e.height;this.context.clearRect(0,0,t,n)}},{key:"setConfig",value:function(e){var t=Object(M.a)(Object(M.a)({},this.config),e);this.config=t}},{key:"getConfig",value:function(){return this.config}},{key:"getCanvasSize",value:function(){var e=this.canvas,t=e.width,n=e.height,c=e.scrollWidth,r=e.scrollHeight;return{width:t,height:n,scrollWidth:c,scrollHeight:r,scaleX:t/c,scaleY:n/r}}}]),e}(),we=n(6),Ce=n(7),ke=function(e){Object(we.a)(n,e);var t=Object(Ce.a)(n);function n(e){var c;return Object(ge.a)(this,n),(c=t.call(this,e)).enabled=!1,c.isDragging=!1,c.drawCommandQueue=[],c.currentDrawCommand=[],c.redoDrawingStack=[],c.canvasSize=null,c.scaleX=1,c.scaleY=1,c.mouseDownHandler=null,c.mouseMoveHandler=null,c.mouseUpHandler=null,c.keyDownHandler=null,c.init(),c}return Object(xe.a)(n,[{key:"init",value:function(){this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),this.keyDownHandler=this.onKeyDown.bind(this),this.bindSocketEventHandler()}},{key:"onMouseDown",value:function(e){console.log("onMouseDown :>> ",e),this.isDragging=!0,this.canvasSize=this.getCanvasSize(),this.startPoint=this.getPoint(e),this.start(),this.currentDrawCommand=[],this.redoDrawingStack=[];var t=this.getConfig(),n=t.size,r=t.color,s=t.mode;R({type:c.DRAWING,body:{drawingStatus:i.START,drawingMode:s,lineWidth:n,color:r,canvasSize:this.canvasSize,point:this.startPoint}})}},{key:"onMouseMove",value:function(e){if(this.isDragging){this.currentPoint=this.getPoint(e);var t=this.canvasSize,n=t.scaleX,r=t.scaleY,s={x:this.startPoint.x*n,y:this.startPoint.y*r},a={x:this.currentPoint.x*n,y:this.currentPoint.y*r},o={context:this.context,config:this.config,startPoint:s,currentPoint:a};this.draw(o),this.startPoint=this.currentPoint,this.currentDrawCommand.push(o),R({type:c.DRAWING,body:{drawingStatus:i.DRAW,point:this.currentPoint}})}}},{key:"undo",value:function(){var e=this.drawCommandQueue.pop();0===(null===e||void 0===e?void 0:e.length)&&this.drawCommandQueue.length>0?this.undo():e&&this.redoDrawingStack.push(e),this.restoreDraw(),R({type:c.DRAWING,body:{drawingStatus:i.REDO}})}},{key:"redo",value:function(){var e=this.redoDrawingStack.pop();0===(null===e||void 0===e?void 0:e.length)&&this.redoDrawingStack.length>0?this.redo():e&&this.drawCommandQueue.push(e),this.restoreDraw(),R({type:c.DRAWING,body:{drawingStatus:i.REDO}})}},{key:"restoreDraw",value:function(){var e=this;this.clear(),this.drawCommandQueue.forEach((function(t){e.context.beginPath(),t.forEach((function(t){e.draw(t)})),e.context.closePath()}))}},{key:"onMouseUp",value:function(e){console.log("onMouseUp :>> ",e),this.isDragging=!1,this.end(),this.drawCommandQueue.push(this.currentDrawCommand),this.currentDrawCommand=[],R({type:c.DRAWING,body:{drawingStatus:i.END}})}},{key:"onKeyDown",value:function(e){"z"===e.key&&e.metaKey&&(e.preventDefault(),e.shiftKey?this.redo():this.undo())}},{key:"clearAll",value:function(){this.clear(),this.drawCommandQueue=[],R({type:c.DRAWING,body:{drawingStatus:i.CLEAR_ALL}})}},{key:"enable",value:function(){this.enabled||(this.enabled=!0,this.bindMouseEventHandler(),this.bindKeyboardEventHandler())}},{key:"disable",value:function(){this.enabled&&(this.enabled=!1,this.unbindMouseEventHandler(),this.unbindKeyboardEventHandler())}},{key:"dispose",value:function(){this.unbindMouseEventHandler(),this.unbindKeyboardEventHandler(),this.mouseDownHandler=null,this.mouseMoveHandler=null,this.mouseUpHandler=null,this.keyDownHandler=null}},{key:"bindMouseEventHandler",value:function(){this.mouseDownHandler&&this.mouseMoveHandler&&this.mouseUpHandler&&(this.canvas.addEventListener("mousedown",this.mouseDownHandler),this.canvas.addEventListener("mousemove",this.mouseMoveHandler),this.canvas.addEventListener("mouseup",this.mouseUpHandler))}},{key:"bindKeyboardEventHandler",value:function(){this.keyDownHandler&&window.addEventListener("keydown",this.keyDownHandler)}},{key:"unbindMouseEventHandler",value:function(){this.mouseDownHandler&&this.mouseMoveHandler&&this.mouseUpHandler&&(this.canvas.removeEventListener("mousedown",this.mouseDownHandler),this.canvas.removeEventListener("mousemove",this.mouseMoveHandler),this.canvas.removeEventListener("mouseup",this.mouseUpHandler))}},{key:"unbindKeyboardEventHandler",value:function(){this.keyDownHandler&&window.removeEventListener("keydown",this.keyDownHandler)}},{key:"bindSocketEventHandler",value:function(){var e=this;je.on(c.DRAWING,(function(t){var n=t.body,c=n.drawingStatus,r=n.drawingMode,s=n.lineWidth,a=n.color,o=n.point,l=n.canvasSize;switch(l&&(e.canvasSize=e.getCanvasSize(),e.scaleX=e.canvasSize.width/l.scrollWidth,e.scaleY=e.canvasSize.height/l.scrollHeight),c){case i.START:e.setConfig({mode:r,size:s,color:a}),e.startPoint={x:o.x*e.scaleX,y:o.y*e.scaleY},e.start();break;case i.DRAW:e.currentPoint={x:o.x*e.scaleX,y:o.y*e.scaleY},e.draw({context:e.context,config:e.config,startPoint:e.startPoint,currentPoint:e.currentPoint}),e.startPoint=e.currentPoint;break;case i.END:e.end();break;case i.CLEAR_ALL:e.clear();break;case i.UNDO:e.undo();break;case i.REDO:e.redo()}}))}}]),n}(ye),Ee=(n(200),function(){var e=Object(te.useRef)(null),t=Object(te.useState)({width:0,height:0}),n=Object(ee.a)(t,2),c=n[0],i=n[1],s=Object(u.c)(X.tools.state),a=s.currentColor,o=s.currentTool,l=s.currentSize,d=he().isWaiting,j=Oe()||d;Object(te.useEffect)((function(){if(e.current){var t=e.current,n=t.getContext("2d");n?(i({width:t.clientWidth,height:t.clientHeight}),_||(_=new ke({canvas:t,context:n})),_.enable()):console.error("\ucee8\ud14d\uc2a4\ud2b8\ub97c \uac00\uc838\uc624\ub294\ub370\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")}}),[]),Object(te.useEffect)((function(){j?_.enable():_.disable()}),[j]),Object(te.useEffect)((function(){_.setConfig({color:a})}),[a,j]),Object(te.useEffect)((function(){_.setConfig({size:l})}),[l,j]),Object(te.useEffect)((function(){_.setConfig({mode:o})}),[o,j]);var b=o===r.ERASER;return Object(se.jsx)("canvas",{id:"drawingCanvas",className:le()({pen:j,eraser:b}),ref:e,width:c.width,height:c.height})}),Ie=n(134),Ne=n(86),Ae=(n(201),function(){var e=Object(u.c)(X.room.state),t=e.userInfo,n=e.participants,r=Object(u.c)(X.chat.state).chatList,i=Object(u.b)(),s=Object(te.useRef)(null),a=Object(te.useRef)(null),o=Object(te.useState)(!1),l=Object(ee.a)(o,2),d=l[0],j=l[1],b=Object(te.useState)(!1),h=Object(ee.a)(b,2),f=h[0],m=h[1],O=Object(te.useCallback)((function(){var e=s.current;e&&(e.scrollTop=e.scrollHeight)}),[s]),p=function(){if(s.current){var e=s.current,t=e.scrollHeight,n=e.scrollTop,c=e.clientHeight,r=t!==Math.ceil(n+c);j(r)}},g=Object(te.useCallback)((function(){var e,n=null===(e=a.current)||void 0===e?void 0:e.value,r=(new Date).getTime();if(a.current&&n&&t){var s={message:n,timestamp:r};R({type:c.CHAT,body:s});var o=t.userId,l=t.nickName;i.chat.addChat(Object(M.a)(Object(M.a)({},s),{},{isMine:!0,userId:o,nickName:l})),i.game.checkUserAnswer({userId:o,text:n.trim()}),a.current.value="",m(!0),setTimeout((function(){O(),m(!1)}),0)}}),[i,t,O]),x=Object(te.useCallback)((function(e){e.shiftKey||"Enter"===e.key&&(e.preventDefault(),g())}),[g]),v=Object(te.useCallback)((function(e){e.shiftKey||"Enter"===e.key&&e.preventDefault()}),[]),S=Object(te.useCallback)((function(e){return n.find((function(t){return t.userId===e}))}),[n]),y=Object(te.useCallback)((function(e){var t,n,c=e.senderId,r=e.body,s=r.timestamp,a=r.message,o=null!==(t=null===(n=S(c))||void 0===n?void 0:n.nickName)&&void 0!==t?t:null;o&&(i.chat.addChat({userId:c,nickName:o,timestamp:s,message:a}),d||O())}),[i,S,O,d]);return Object(te.useEffect)((function(){return window.addEventListener("resize",p),function(){return window.removeEventListener("resize",p)}}),[]),Object(te.useEffect)((function(){je.removeAllListeners(c.CHAT),je.on(c.CHAT,y)}),[y]),Object(se.jsxs)(ne.g,{h:"100%",templateRows:"repeat(10, 1fr)",borderRadius:6,overflow:"hidden",children:[Object(se.jsxs)(ne.h,{rowSpan:9,className:"chat-list-wrap",children:[Object(se.jsx)("ul",{ref:s,onScroll:p,className:le()({"hide-scrollbar":f}),children:r.map((function(e,t){var n=e.isMine,c=e.nickName,r=e.message;return Object(se.jsxs)("li",{className:le()({mine:n}),children:[Object(se.jsx)("p",{className:"nickname",children:c}),Object(se.jsx)("p",{className:"body",children:r})]},t)}))}),d&&Object(se.jsx)(ce.b,{"aria-label":"\ucd5c\uc2e0 \ub300\ud654\ubcf4\uae30",size:"md",borderRadius:100,colorScheme:"teal",boxShadow:"xl",icon:Object(se.jsx)(Ne.a,{}),onClick:O})]}),Object(se.jsx)(ne.h,{rowSpan:1,children:Object(se.jsx)(ne.f,{h:"100%",alignItems:"center",p:"10px",children:Object(se.jsxs)(Ie.b,{size:"lg",children:[Object(se.jsx)(Ie.a,{fontSize:"16px",bg:"#fff",pr:"4.5rem",type:"text",placeholder:"\uba54\uc2dc\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694!",ref:a,onKeyDown:v,onKeyUp:x}),Object(se.jsx)(Ie.c,{width:"4rem",mr:"4px",justifyContent:"flex-end",children:Object(se.jsx)(ce.b,{"aria-label":"\uc804\uc1a1",size:"md",bg:"gray.300",icon:Object(se.jsx)(Ne.b,{}),onClick:g})})]})})})]})}),Re=(n(202),n(145)),Te=function(e){var t=e.word,n=e.isBlind;return t?Object(se.jsx)(ne.b,{bg:"green.400",minWidth:"100px",textAlign:"center",fontWeight:600,p:"10px 20px",color:"white",borderRadius:"6",children:n?Array.from({length:t.length}).fill(" _ "):t}):null},De=(n(203),function(e){var t=e.round,n=e.totalRound,c=e.isWaiting;return Object(se.jsxs)(ne.b,{className:"game-round",textAlign:"right",children:[Object(se.jsx)(ne.l,{fontSize:"xs",color:"blackAlpha.600",children:"\ub77c\uc6b4\ub4dc"}),Object(se.jsx)(ne.l,{color:"blackAlpha.600",children:c?Object(se.jsx)(ne.l,{as:"strong",color:"blackAlpha.900",children:"\ub300\uae30\uc911"}):Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(ne.l,{as:"strong",color:"blackAlpha.900",children:t})," ","/ ",n]})})]})}),Pe=n(146),Le=n.p+"static/media/tick-tock.f2342ab4.mp3",ze=(n(204),function(e){var t=e.timeCount,n=void 0===t?60:t,c=e.isWaiting,r=n<10,i=0===n,s=Object(Pe.a)(Le,{playbackRate:2,interrupt:!0}),a=Object(ee.a)(s,2),o=a[0],l=a[1].stop;return Object(te.useEffect)((function(){return r&&!i?o({forceSoundEnabled:!0}):l(),function(){l()}}),[r,i,o,l]),Object(se.jsxs)(ne.b,{className:"game-timer",children:[Object(se.jsx)(ne.l,{className:"timer-emoji",children:"\u23f0"}),i?Object(se.jsx)(ne.l,{fontSize:"sm",color:"gray.500",children:"\uc2dc\uac04\ucd08\uacfc!"}):Object(se.jsx)(ne.l,{fontSize:"xl",fontWeight:600,color:r?"red.500":"blackAlpha.900",children:c?"\u221e":n})]})}),He=(n(205),function(e){var t=e.color,n=e.selected,c=e.onClick,r="#ffffff"===t;return Object(se.jsx)(ne.b,{className:le()("palette-card",{selected:n}),backgroundColor:t,onClick:function(){return null===c||void 0===c?void 0:c(t)},children:n&&Object(se.jsx)("span",{className:"icon-checked",children:Object(se.jsx)(Ne.c,{color:r?"#000":"#fff",w:3,h:3})})})}),Me=n(135),Ue=function(e){var t=e.value,n=void 0===t?3:t,c=e.onSliderChange;return Object(se.jsxs)(Me.a,{"aria-label":"slider-ex-1",defaultValue:n,min:1,max:20,colorScheme:"teal",onChange:function(e){return c(e)},children:[Object(se.jsx)(Me.d,{children:Object(se.jsx)(Me.b,{})}),Object(se.jsx)(Me.c,{})]})},We=(n(206),function(e){var t=e.index,n=void 0===t?0:t,c=e.size,r=void 0===c?40:c;return Object(se.jsx)("div",{className:"profile-avatar",style:{width:"".concat(r,"px"),fontSize:"".concat(r,"px")},children:S[n]})}),_e=n(232),Ge=(n(207),{initial:{opacity:0,y:30,scale:.85},visible:{opacity:1,y:0,scale:1}}),Be=function(e){var t=e.children,n=e.title;return Object(se.jsxs)(_e.a.div,{initial:"initial",animate:"visible",variants:Ge,transition:{duration:.3},children:[Object(se.jsx)(ne.i,{mb:5,color:"white",textAlign:"center",children:n}),t&&Object(se.jsx)(ne.b,{bgColor:"white",width:370,minHeight:200,borderRadius:6,padding:6,marginX:"auto",children:t})]})},Ye=(n(208),function(e){var t=e.isMyTurn,n=e.word,c=e.painterName,r=Object(se.jsxs)(ne.l,{as:"p",lineHeight:1.5,children:[c,"\ub2d8 \ucc28\ub840\uc5d0\uc694!",Object(se.jsx)("br",{}),"\uc774\ubc88 \ubb38\uc81c\ub294",Object(se.jsx)(ne.l,{m:2,color:"green.300",as:"span",children:n}),"\uc785\ub2c8\ub2e4!"]}),i=Object(se.jsxs)(ne.l,{as:"p",lineHeight:1.5,children:[Object(se.jsx)(ne.l,{m:2,color:"green.300",as:"span",children:c}),"\ub2d8\uc774 \uadf8\ub9bc \uadf8\ub9b4 \ucc28\ub840\uc785\ub2c8\ub2e4!"]});return Object(se.jsx)(Be,{title:t?r:i})}),Ke=(n(209),function(e){var t=e.userList,n=e.word,c=Object(u.c)(X.gamePoint.state).correctUserList;return Object(se.jsx)(Be,{title:Object(se.jsxs)(se.Fragment,{children:["\uc815\ub2f5\uc740",Object(se.jsx)(ne.l,{m:2,color:"green.300",as:"span",textDecoration:"underline",children:n}),"\uc785\ub2c8\ub2e4!"]}),children:Object(se.jsx)("ul",{className:"result-score",children:t.map((function(e){var t,n=e.nickName,r=e.userId,i=e.profileIndex,s=c.find((function(e){return e.userId===r}));return Object(se.jsxs)("li",{children:[Object(se.jsxs)("div",{className:"rank-name",children:[Object(se.jsx)(We,{size:20,index:i}),Object(se.jsxs)(ne.l,{m:2,color:s?"green.400":"black",as:"strong",children:[n," ",s&&"\ud83c\udf89"]})]}),Object(se.jsxs)(ne.a,{className:"rank-score",colorScheme:s?"green":"gray",children:[Object(se.jsx)("span",{children:null!==(t=null===s||void 0===s?void 0:s.point)&&void 0!==t?t:0})," \uc810"]})]},r)}))})})}),Je=n(147),Qe=(n(210),function(e){var t=e.userList,n=Object(u.c)(X.gamePoint.state).correctUserList;return Object(te.useEffect)((function(){Object(Je.a)({particleCount:100,spread:150,zIndex:1e3})}),[]),Object(se.jsx)(Be,{title:"\ud83c\udf89 \uc21c\uc704\ub97c \ubc1c\ud45c\ud569\ub2c8\ub2e4!",children:Object(se.jsx)("ul",{className:"result-score",children:t.map((function(e,t){var c,r=e.nickName,i=e.userId,s=e.profileIndex,a=n.find((function(e){return e.userId===i})),o=0===t,l=1===t,u=2===t;return Object(se.jsxs)("li",{className:le()({winner:o}),children:[Object(se.jsxs)("div",{className:"rank-name",children:[Object(se.jsxs)("span",{className:"medal",children:[o&&"\ud83c\udfc5"," ",l&&"\ud83e\udd48"," ",u&&"\ud83e\udd49"]}),Object(se.jsxs)("div",{className:"avatar-wrap",children:[Object(se.jsx)(We,{size:25,index:s}),o&&Object(se.jsx)("span",{className:"crown",children:"\ud83d\udc51"})]}),Object(se.jsxs)(ne.l,{m:2,color:"black",as:"strong",children:[r," ",o&&"\ud83c\udf89"]})]}),Object(se.jsxs)(ne.a,{className:"rank-score",colorScheme:"gray",children:[Object(se.jsx)("span",{children:null!==(c=null===a||void 0===a?void 0:a.point)&&void 0!==c?c:0})," \uc810"]})]},i)}))})})}),qe=(n(211),new Re.a),Ve=function(){var e=Object(u.c)(X.room.state),t=e.participants,n=e.userInfo,c=Object(u.c)(X.game.state),r=c.time,i=c.questions,s=c.round,a=Object(u.c)(X.gamePoint.state).correctUserList,o=Object(u.c)(X.game.isVisibleOverlayContent),l=a.find((function(e){return e.userId===(null===n||void 0===n?void 0:n.userId)})),d=he(),j=d.isWaiting,b=d.isStandByTurn,h=d.isComplete,f=d.isGameOver,m=d.isPlaying,O=pe(),p=O.profileIndex,g=O.nickName,x="".concat(S[p]," ").concat(g),v=me(),y=Oe(),w=j?"\ud55c\uba85 \ub354 \ub4e4\uc5b4\uc624\uba74 \uc2dc\uc791 \ud560 \uc218 \uc788\uc5b4\uc694!":i[s-1],C=!j&&!y&&!l;return Object(te.useEffect)((function(){if(m&&v){var e,t=S[null!==(e=null===n||void 0===n?void 0:n.profileIndex)&&void 0!==e?e:0];qe.addConfetti({emojis:[t,w,"\u2b50","\ud83c\udf08","\u270c","\u2705"]})}}),[m,v,n,w]),Object(se.jsxs)("div",{className:"game-content-container",children:[Object(se.jsxs)(ne.f,{className:"header",justifyContent:"space-between",children:[Object(se.jsx)(ze,{timeCount:r,isWaiting:j}),Object(se.jsx)(Te,{word:w,isBlind:C}),Object(se.jsx)(De,{round:s,totalRound:i.length,isWaiting:j})]}),Object(se.jsxs)(ne.f,{className:"body",justifyContent:"center",alignItems:"center",children:[Object(se.jsx)(Ee,{}),o&&Object(se.jsxs)(ne.f,{className:"overlay-wrap",justifyContent:"center",alignItems:"center",children:[b&&Object(se.jsx)(Ye,{isMyTurn:y,word:w,painterName:x}),h&&Object(se.jsx)(Ke,{userList:t,word:w}),f&&Object(se.jsx)(Qe,{userList:t})]})]})]})},Fe=function(){var e=pe();return Object(se.jsx)(ne.c,{height:"100%",p:3,bg:"gray.500",color:"white",borderRadius:6,children:Object(se.jsx)(ne.m,{children:e?Object(se.jsxs)(se.Fragment,{children:[Object(se.jsxs)(ne.l,{fontSize:"3xl",children:["\ud83c\udfa8 ",S[e.profileIndex]]}),Object(se.jsxs)(ne.l,{children:[e.nickName," \ub2d8\uc774 \uadf8\ub9bc \uadf8\ub9b4 \ucc28\ub840\uc785\ub2c8\ub2e4!"]})]}):Object(se.jsx)(ne.l,{children:"\uac8c\uc784 \uc900\ube44\uc911\uc785\ub2c8\ub2e4."})})})},Xe=n(99),Ze=n(148),$e=n(29),et=n(236),tt=function(e){var t=e.deps,n=void 0===t?[]:t,c=Object(et.a)();return Object(te.useEffect)((function(){c.start({opacity:[.5,1],scale:[.7,1.1,1],y:[15,-10,0],transition:{delay:1,x:{type:"spring",stiffness:50,velocity:50},default:{duration:.5}}})}),[c].concat(Object($e.a)(n))),{controls:c}},nt=(n(212),function(e){var t=e.roomId,n=k(S.length),c=Object(te.useState)(n),r=Object(ee.a)(c,2),i=r[0],s=r[1],a=Object(u.b)(),o=Object(te.useRef)(null),l=Object(te.useMemo)((function(){return 0===i}),[i]),d=Object(te.useMemo)((function(){return i===S.length-1}),[i]),j=W(y)||"",b=tt({deps:[i]}).controls,h=Object(te.useCallback)((function(){var e=k(S.length);s(e)}),[s]),f=Object(te.useCallback)((function(){s((function(e){return e-1}))}),[s]),m=Object(te.useCallback)((function(){s((function(e){return e+1}))}),[s]),O=Object(te.useCallback)((function(){var e,n=null===(e=o.current)||void 0===e?void 0:e.value;if(n){var c={userId:Object(p.a)(),nickName:n,profileIndex:i};T.emit("join",{roomId:t,userInfo:c}),a.room.setUserInfo(c),a.room.setJoinedState(!0),U(y,n)}else alert("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!")}),[a,t,i,o]),g=Object(te.useCallback)((function(e){"Enter"===e.key&&(e.preventDefault(),O())}),[O]);return Object(se.jsx)(ne.d,{alignContent:"center",className:"gate-container",children:Object(se.jsxs)(Xe.a,{children:[Object(se.jsxs)(ne.k,{spacing:5,children:[Object(se.jsx)(ne.i,{as:"h1",size:"xl",children:"\ud504\ub85c\ud544 \uc124\uc815"}),Object(se.jsx)(Ie.a,{variant:"outline",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!",defaultValue:j,maxLength:15,textAlign:"center",ref:o,onKeyDown:g,required:!0}),Object(se.jsxs)(ne.g,{templateColumns:"repeat(5, 1fr)",alignItems:"center",gap:6,children:[Object(se.jsx)(ce.b,{colorScheme:"teal","aria-label":"\uc774\uc804",icon:Object(se.jsx)(re.a,{}),disabled:l,onClick:f}),Object(se.jsx)(ne.h,{colSpan:3,textAlign:"center",children:Object(se.jsx)(_e.a.div,{animate:b,children:Object(se.jsx)(ne.l,{fontSize:"7xl",children:S[i]})})}),Object(se.jsx)(ce.b,{colorScheme:"teal","aria-label":"\ub2e4\uc74c",icon:Object(se.jsx)(re.b,{}),disabled:d,onClick:m})]}),Object(se.jsx)(ce.a,{rightIcon:Object(se.jsx)(Ze.a,{}),onClick:h,colorScheme:"teal",size:"lg",variant:"outline",children:"\ub79c\ub364 \ud504\ub85c\ud544"})]}),Object(se.jsxs)(ne.k,{spacing:5,mt:50,children:[Object(se.jsx)(ne.e,{}),Object(se.jsx)(ce.a,{type:"submit",rightIcon:Object(se.jsx)(re.c,{}),colorScheme:"teal",size:"lg",variant:"solid",onClick:O,children:"\uc785\uc7a5\ud558\uae30"})]})]})})}),ct=n(149),rt=(n(213),function(){var e=Object(te.useCallback)((function(){window.location.href="./"}),[]);return Object(se.jsxs)(ne.f,{className:"header-container",h:"100%",p:"4",align:"center",children:[Object(se.jsx)(ne.i,{fontSize:20,color:"#fff",children:"Picasso"}),Object(se.jsx)(ne.j,{}),Object(se.jsx)(ce.b,{"aria-label":"Exit",fontSize:20,icon:Object(se.jsx)(ct.a,{}),onClick:e})]})}),it=function(e){var t=e.roomId,n=Object(u.c)(X.room.state).userInfo,c=Object(u.b)(),r=Object(te.useCallback)((function(e){var t=e.participants;N||(c.room.setSocketState(!0),c.room.updateParticipants(t))}),[c]),i=Object(te.useCallback)((function(e){console.log("onJoinUser",e),c.room.updateParticipants(e.participants),je.emit("join",e)}),[c]),s=Object(te.useCallback)((function(e){console.log("onLeaveUser",e),c.room.updateParticipants(e.participants),je.emit("leave",e)}),[c]),a=Object(te.useCallback)((function(e){console.log("onMessage",e),je.emit(e.type,e)}),[]),o=Object(te.useCallback)((function(){T.emit("gate",t),T.on("gate",r),T.on("join",i),T.on("leave",s),T.on("message",a)}),[t,r,i,s,a]);return Object(te.useEffect)((function(){if(n){var e=n.userId;!function(e){var t=e.roomId,n=e.userId;m=t,O=n}({roomId:t,userId:e})}}),[t,n]),Object(te.useEffect)((function(){o()}),[o]),null},st=(n(214),function(){var e=Object(u.c)(X.tools.state),t=e.currentColor,n=e.currentTool,c=e.currentSize,i=Object(u.b)(),s=Object(te.useCallback)((function(e){e===r.CLEAR_ALL?(_.clearAll(),i.tools.setTool(r.PEN)):i.tools.setTool(e)}),[i]),a=Object(te.useCallback)((function(e){i.tools.setColor(e)}),[i]),o=Object(te.useCallback)((function(e){i.tools.setSize(e)}),[i]);return Object(se.jsxs)(ne.g,{h:"100%",p:{base:0,lg:"10px 10px 0"},templateRows:{base:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(1, 1fr)"},children:[Object(se.jsx)(ne.h,{rowSpan:2,colSpan:1,children:Object(se.jsxs)(ne.g,{templateRows:{base:"repeat(1, 1fr)",lg:"repeat(3, 1fr)"},templateColumns:{base:"repeat(2, 1fr)",lg:"repeat(1, 1fr)"},children:[Object(se.jsx)(ne.h,{w:"100%",rowSpan:{base:1,lg:2},colSpan:{base:1,lg:1},className:"tool-type-wrap",children:Object(se.jsx)(ne.k,{direction:"row",spacing:2,align:"center",children:Object.keys(r).map((function(e){return Object(se.jsx)(ce.a,{className:e,isActive:e===n,variant:"outline",size:"sm",onClick:function(){return s(e)},children:e},e)}))})}),Object(se.jsx)(ne.h,{rowSpan:{base:2,lg:1},colSpan:{base:1,lg:1},children:Object(se.jsx)(Ue,{value:c,onSliderChange:o})})]})}),Object(se.jsx)(ne.h,{rowSpan:1,colSpan:{base:2,lg:1},children:v.map((function(e){return Object(se.jsx)(He,{color:e,selected:e===t,onClick:a},e)}))})]})}),at=n(136),ot=(n(215),function(){var e=Object(u.c)(X.room.state).participants,t=Object(u.c)(X.game.state).painterId,n=Object(u.c)(X.gamePoint.state).correctUserList;return e.length?Object(se.jsx)("ul",{className:"user-list",children:e.map((function(e){var c=e.userId,r=e.nickName,i=e.profileIndex,s=e.point,a=void 0===s?0:s,o=n.find((function(e){return e.userId===c})),l=t===c;return Object(se.jsx)("li",{children:Object(se.jsxs)(ne.f,{className:le()("profile-wrap",{painter:l}),bg:"white",margin:2,mb:4,padding:2,borderRadius:6,children:[Object(se.jsx)(We,{index:i}),Object(se.jsxs)(ne.b,{ml:"3",width:"100%",overflow:"hidden",children:[Object(se.jsx)(ne.l,{className:"nickname",fontWeight:"bold",children:r}),Object(se.jsxs)(ne.a,{className:"point",borderRadius:4,colorScheme:o?"green":"gray",children:[Object(se.jsx)("span",{children:a})," \uc810"]})]})]})},c)}))}):Object(se.jsx)("ul",{className:"user-list",children:Array.from({length:1}).map((function(e,t){return Object(se.jsx)("li",{children:Object(se.jsx)(at.a,{height:"68px",borderRadius:6,startColor:"gray.500"})},t)}))})}),lt=(n(216),function(){var e=Object($.g)().roomId,t=void 0===e?"":e,n=Object(u.c)(X.room.state).isJoined,c=he().isWaiting,r=Oe();return be(),fe(),Object(se.jsxs)(ue,{id:"room",children:[Object(se.jsx)(it,{roomId:t}),n?Object(se.jsx)(ne.d,{p:0,maxW:"100%",minW:"375px",className:"joined",children:Object(se.jsxs)(ne.g,{h:"100vh",templateRows:"repeat(16, 1fr)",templateColumns:"repeat(15, 1fr)",bg:"gray.100",children:[Object(se.jsx)(ne.h,{rowSpan:{base:1},colSpan:{base:15},bg:"purple.400",className:"head-section",maxHeight:"60px",children:Object(se.jsx)(rt,{})}),Object(se.jsx)(ne.h,{rowSpan:{base:15},colSpan:{base:15},className:"body-section",children:Object(se.jsxs)(ne.g,{w:"100%",h:"100%",gap:2,padding:2,templateRows:"repeat(10, 1fr)",gridAutoFlow:{base:"row",lg:"column"},justifyContent:"center",children:[Object(se.jsxs)(ne.h,{rowSpan:{base:1,lg:10},colSpan:{base:10,lg:2},borderRadius:6,bg:"gray.300",minWidth:"230px",children:[Object(se.jsx)(ot,{}),!1]}),Object(se.jsx)(ne.h,{rowSpan:{base:5,lg:10},colSpan:{base:10,lg:5},borderRadius:6,bg:"white",children:Object(se.jsx)(Ve,{})}),Object(se.jsx)(ne.h,{rowSpan:{base:4,lg:10},colSpan:{base:10,lg:3},width:{base:"100%",lg:"280px"},children:Object(se.jsxs)(ne.g,{h:"100%",templateRows:"repeat(10, 1fr)",templateColumns:"repeat(3, 1fr)",gap:2,children:[Object(se.jsx)(ne.h,{rowSpan:2,colSpan:3,bg:"gray.100",minHeight:{base:90,lg:150},className:le()({"hide-status":!(r||c)}),children:r||c?Object(se.jsx)(st,{}):Object(se.jsx)(Fe,{})}),Object(se.jsx)(ne.h,{rowSpan:{base:10,lg:8},colSpan:3,borderRadius:6,bg:"gray.300",children:Object(se.jsx)(Ae,{})})]})})]})})]})}):Object(se.jsx)(nt,{roomId:t})]})}),ut=n(28),dt=n(237),jt=n(34),bt=n(150),ht=n(151),ft=["children","style","vAlign","hAlign","size","color"];Object(ut.b)({TextGeometry:ht.a});var mt=function(e){var t=e.children,n=(e.style,e.vAlign,e.hAlign,e.size),c=void 0===n?1:n,r=e.color,i=void 0===r?"#000000":r,s=Object(jt.a)(e,ft),a=Object(ut.d)(bt.a,"fonts/Jua_Regular-picaso.json"),o=Object(te.useMemo)((function(){return{font:a,size:3,height:.5,curveSegments:1.5,bevelEnabled:!0,bevelThickness:1,bevelSize:.1,bevelOffset:.01,bevelSegments:10}}),[a]),l=Object(te.useRef)(null);return Object(te.useEffect)((function(){l.current&&l.current.children[0].geometry.center()}),[t]),Object(se.jsx)("group",Object(M.a)(Object(M.a)({ref:l},s),{},{scale:[.1*c,.1*c,.1],children:Object(se.jsxs)("mesh",{children:[Object(se.jsx)("textGeometry",{attach:"geometry",args:[t,o]}),Object(se.jsx)("meshPhongMaterial",{shininess:200,color:i,attach:"material"})]})}))},Ot=n(229),pt=function(e){var t=e.position,n=e.size,c=void 0===n?1:n,r=Object(te.useRef)(),i=Object(Ot.a)(Object($e.a)(Array(6)).map((function(e,t){return"textures/cube".concat(t+1,".jpg")})));return Object(ut.c)((function(){r.current.rotation.x+=.005,r.current.rotation.y+=.005})),Object(se.jsxs)("mesh",{ref:r,position:t,scale:1,children:[Object(se.jsx)("boxGeometry",{args:[c,c,c]}),i.map((function(e,t){return Object(se.jsx)("meshBasicMaterial",{attachArray:"material",map:e},t)}))]})},gt=n(14),xt=n(230),vt=n(231),St=function(e){var t=e.radius,n=(e.position,Object(Ot.a)(["textures/earth-clouds.jpg"])),c=Object(ee.a)(n,1)[0],r=Object(te.useRef)(null);return Object(ut.c)((function(e){var t=e.clock;r.current&&(r.current.rotation.y=.02*t.elapsedTime)})),Object(se.jsx)(xt.a,{ref:r,args:[t+.05,32,32],children:Object(se.jsx)("meshPhongMaterial",{transparent:!0,alphaMap:c,opacity:.5})})},yt=function(e){var t=e.radius,n=void 0===t?1:t,c=e.position,r=Object(te.useRef)(),i=Object(Ot.a)(["textures/earth-specular.jpg"]),s=Object(ee.a)(i,1)[0];return Object(ut.c)((function(){r.current.rotation.y+=.001})),Object(se.jsxs)("group",{ref:r,position:c,scale:1,children:[Object(se.jsx)(St,{radius:n}),Object(se.jsx)(xt.a,{args:[n,32,32],children:Object(se.jsx)("meshPhongMaterial",{attach:"material",color:"#489396",shininess:5,map:s,specularMap:s,specular:new gt.Color("#2BC6CF")})}),Object(se.jsx)(vt.a,{radius:100,depth:50,count:3e3,factor:6,saturation:0,fade:!0})]})},wt=new gt.Vector3,Ct=function(){var e=Object(te.useState)(!0),t=Object(ee.a)(e,2),n=t[0],c=t[1];return Object(ut.c)((function(e){n&&e.camera.position.lerp(wt.set(0,0,15),.2)})),Object(te.useEffect)((function(){var e=setTimeout((function(){c(!1)}),1500);return function(){return clearTimeout(e)}}),[]),Object(se.jsx)("mesh",{})},kt=(n(219),function(){return Object(se.jsxs)("div",{className:"about-wrap",children:[Object(se.jsxs)(ut.a,{camera:{position:[20,20,300],fov:30},children:[Object(se.jsx)("ambientLight",{}),Object(se.jsx)("pointLight",{position:[10,10,10]}),Object(se.jsxs)(te.Suspense,{fallback:null,children:[Object(se.jsx)(pt,{size:1.2,position:[0,.1,0]}),Object(se.jsx)("mesh",{position:[0,1.8,0],children:Object(se.jsx)(mt,{hAlign:"left",color:"#0e978c",size:1.4,children:"Picasso"})}),Object(se.jsx)(yt,{radius:2,position:[0,-3.4,0]}),Object(se.jsx)(Ct,{})]}),Object(se.jsx)(dt.a,{panSpeed:.4,minDistance:9,maxDistance:40})]}),Object(se.jsx)(ce.a,{w:"200px",h:"50px",colorScheme:"yellow",size:"lg",fontWeight:"bold",variant:"solid",children:Object(se.jsx)("a",{href:"https://github.com/maybe-picasso/picasso",target:"_blank",rel:"noreferrer",children:"Github"})})]})}),Et=function(){return Object(se.jsxs)($.c,{children:[Object(se.jsx)($.a,{path:ie.HOME,element:Object(se.jsx)(ae,{})}),Object(se.jsx)($.a,{path:ie.ROOM,element:Object(se.jsx)(lt,{})}),Object(se.jsx)($.a,{path:ie.ABOUT,element:Object(se.jsx)(kt,{})})]})},It=function(){return Object(se.jsx)(u.a,{store:F,children:Object(se.jsx)(d.a,{theme:Z,children:Object(se.jsx)(Et,{})})})};n(220);o.a.render(Object(se.jsx)(l.a,{children:Object(se.jsx)(It,{})}),document.getElementById("root"))}},[[221,1,2]]]);
//# sourceMappingURL=main.4721d890.chunk.js.map